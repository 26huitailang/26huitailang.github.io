<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Posts | Peter's Blog</title>
<meta name=keywords content>
<meta name=description content="Posts - Peter's Blog">
<meta name=author content="Peter">
<link rel=canonical href=https://26huitailang.github.io/posts/>
<meta name=google-site-verification content="XYZabc">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<link rel=preload href=/apple-touch-icon.png as=image>
<link rel=icon href=https://26huitailang.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=16x16 href=https://26huitailang.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=32x32 href=https://26huitailang.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=apple-touch-icon href=https://26huitailang.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=https://26huitailang.github.io/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.2">
<link rel=alternate type=application/rss+xml href=https://26huitailang.github.io/posts/index.xml>
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-102660054-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="Posts">
<meta property="og:description" content="Sharing some notes here">
<meta property="og:type" content="website">
<meta property="og:url" content="https://26huitailang.github.io/posts/"><meta property="og:image" content="https://26huitailang.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="Peter's Blog">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://26huitailang.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="Posts">
<meta name=twitter:description content="Sharing some notes here">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://26huitailang.github.io/posts/"}]}</script>
</head>
<body class=list id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://26huitailang.github.io accesskey=h title="Home (Alt + H)">
<img src=/apple-touch-icon.png alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://26huitailang.github.io/categories/ title=categories>
<span>categories</span>
</a>
</li>
<li>
<a href=https://26huitailang.github.io/tags/ title=tags>
<span>tags</span>
</a>
</li>
<li>
<a href=https://26huitailang.github.io/search/ title="search (Alt + /)" accesskey=/>
<span>search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<header class=page-header><div class=breadcrumbs><a href=https://26huitailang.github.io>Home</a></div>
<h1>Posts</h1>
</header>
<article class=post-entry>
<header class=entry-header>
<h2>Golang搭建环境
</h2>
</header>
<section class=entry-content>
<p>Golang 开发环境准备和工具选择
参考Alikhll/golang-developer-roadmap。
更多关于golang的分享，参考Awesome-go
环境准备 加速/私有模块 开发编辑器/IDE vim vscode goland 软件选择 CLI工具开发 cobra Web Gin🍺 Echo🍺 Beego go-swagger Iris ORM Gorm🍺 Xorm DB PG🍺 Redis🍺 MongoDB Log Zap Logrus Websocket gorilla/websocket Task schedule Gron CI/CD gitlab CI/CD githu actions teamcity 部署选择 docker supervisor </p>
</section>
<footer class=entry-footer><span title="2020-05-07 00:00:00 +0000 UTC">May 7, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Peter</footer>
<a class=entry-link aria-label="post link to Golang搭建环境" href=https://26huitailang.github.io/posts/golang/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Multipass
</h2>
</header>
<section class=entry-content>
<p>multipass to set development environment 官网
指定配置 $ multipass launch --name XXX -c 2 -d 20G -m 2G 删除 $ multipass delete --purge XXXXX 问题 macos下面使用virtualbox暂时拿不到ip，只能使用NAT，最好使用hyperkit windows下面也不行，尝试添加第二个网络(gui操作 or vboxmanager)，我这里使用了桥接，之后修改/etc/network/interfaces填写相关信息，重启之后查看网卡能获得ip # ubuntu 18.04 allow-hotplug enp0s8 iface enp0s8 inet static address 10.200.242.200 netmask 255.0.0.0 gateway 10.0.0.3 ubuntu20.04操作: 修改 /etc/netplan/50-cloud-init.yaml 应用 sudo netplan apply 重启 sudo reboot # ubuntu 20.04 /etc/netplan/50-cloud-init.yaml network: ethernets: enp0s3: dhcp4: true match: macaddress: 08:00:27:bc:97:36 set-name: enp0s3 version: 2 # change like following part network: ethernets: enp0s3: dhcp4: false addresses: [10....</p>
</section>
<footer class=entry-footer><span title="2020-04-23 00:00:00 +0000 UTC">April 23, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Peter</footer>
<a class=entry-link aria-label="post link to Multipass" href=https://26huitailang.github.io/posts/linux/ubuntu/multipass/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Toolbox
</h2>
</header>
<section class=entry-content>
<p>Tool Hub 各个分类的工具汇总
开发 代码 nvim vscode jetbrains vim 接口测试 postman httpie jebrains http test curl 接口性能测试 vegeta pssh + vegeta, pssh并行在多个计算机中执行命令，vegeta接口性能测试工具，支持代码修改、命令模式，输出json、text、gob、html等格式 apache benchmark(ab) 文档 markdown：
typora，已收费 vscode + markdown + mermaid plugin markdown mermaid plantUML pandoc 构建文档 i18n poedit redis another redis desktop manager redis desktop manager 密码 keepass, windows macpass, macos, keepss的mac实现 输入效率 atext, windows copyQ, windows afred, macos dash, macos ssh/sftp transmit, macos xshell, windows mobaxterm, windows 作图 工具 功能 价格 地址 draw....</p>
</section>
<footer class=entry-footer><span title="2020-03-17 00:00:00 +0000 UTC">March 17, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Peter</footer>
<a class=entry-link aria-label="post link to Toolbox" href=https://26huitailang.github.io/posts/tools/toolbox/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>vue cors
</h2>
</header>
<section class=entry-content>
<p>利用proxy 解决 Django Vue 开发环境中的跨域问题 最近使用 Django+Vue的组合快速的做一个项目，前段之前有看过，但是只是👀会了，这次实际操作，在前后端分离后的开发环境中踩了坑。
环境 Django + DRF Django Channels，主要是websocket vue-admin-template，一个开源的项目，很多东西都有实现，新手可以用来改改就用，还能学习 开发环境：
wsgi, 8000 asgi, 8001 vue, 9528 问题 想像在使用nginx一样的透明的使用开发环境 django已经配置了corsheaders middleware了 尝试 axios显示指定地址和端口到8000的服务上，解决了axios实例的访问，但是使用 el-upload的表单时，发现就不好使了，localhost和其他不同域，拿不到 cookie中的csrftoken，导致被 django拒绝 解决 在查看了各种文档后，最有效的方案是devServer的proxy，这是webpack提供的功能，使用的是http-proxy-middleware这个中间件，文档很详细，可以看看。
目标：
代理 /api的请求到8000端口的wsgi server 代理 /ws的请求到8001的asgi server /api ---> localhost:8000/api localhost:9528 (cookie) -- /ws ---> localhost:8001/ws vue.conf.js
devServer: { ... proxy: { [process.env.VUE_APP_BASE_API]: { target: 'http://127.0.0.1:8000', changeOrigin: true, ws: false, pathRewrite: { ['^' + process....</p>
</section>
<footer class=entry-footer><span title="2020-03-17 00:00:00 +0000 UTC">March 17, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Peter</footer>
<a class=entry-link aria-label="post link to vue cors" href=https://26huitailang.github.io/posts/vue/cors/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>docker env file
</h2>
</header>
<section class=entry-content>
<p>docker env file 在docker-compose 中使用以下方式导入.envfile。
web: build: . restart: always working_dir: /deploy/mysite command: ./service_web.sh env_file: - .env # environments .env
DOCKER=1 HOME=/deploy 想用shell script动态获取环境的CPU count 如果直接在.env 中写如下的内容，会报语法错误：
CPU_NUM=$(cat /proc/cpuinfo |grep processor|wc -l) 所以，在web服务的command: ./service_web.sh脚本中export一个变量，并在gunicorn中使用：
#!/bin/bash sleep 5 export CPU_NUM=$(cat /proc/cpuinfo |grep processor|wc -l) python manage.py collectstatic -v0 --noinput python manage.py migrate --noinput /usr/local/bin/gunicorn -w $((2*$CPU_NUM+1)) -b unix:/deploy/running/handle/django-tutorial-server.sock mysite.wsgi:application --log-level info </p>
</section>
<footer class=entry-footer><span title="2019-01-01 00:00:00 +0000 UTC">January 1, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Peter</footer>
<a class=entry-link aria-label="post link to docker env file" href=https://26huitailang.github.io/posts/docker/env/></a>
</article>
<footer class=page-footer>
<nav class=pagination>
<a class=prev href=https://26huitailang.github.io/posts/page/3/>« Prev Page</a>
<a class=next href=https://26huitailang.github.io/posts/page/5/>Next Page »</a>
</nav>
</footer>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://26huitailang.github.io>Peter's Blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>